name: ludus_child_domain_join
type: role
version: "1.0.0"
description: "Join a machine to the child domain created from ludus_child_domain"
repository: "https://github.com/ChoiSG/ludus_ansible_roles"
author: "ChoiSG (@_choisec)"

dependencies: []

installation_method: "directory"

note: "Must install from directory - required because Ludus backend doesn't support 3rd party domain/controllers"

IMPORTANT_DOMAIN_CONFIG_NOTE: "DO NOT include 'domain:' section in VM configuration when using ludus_child_domain_join role. The role handles domain joining internally. Example: Do NOT add 'domain: { fqdn: prod.test.local, role: member }' to VMs using this role."

variables:
  dc_ip:
    type: "string"
    default: "10.2.30.10"
    description: "desired IP address"
    
  dns_domain_name:
    type: "string"
    default: "dev.test.local"
    description: "desired subdomain.parent.domain"
    
  domain_admin_user:
    type: "string"
    default: "administrator@dev.test.local"
    description: "<user>@<domain> format. Use `administrator`, since ludus's domainadmin default user is not created with ludus_child_domain"
    
  domain_admin_password:
    type: "string"
    default: "password"
    description: "<this is hardcoded now> always use password" 